var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){return null==t?"":t}let u,s=!1;function c(t,e,r,n){for(;t<e;){const o=t+(e-t>>1);r(o)<=n?t=o+1:e=o}return t}function l(t,e){s?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,r=new Int32Array(e.length+1),n=new Int32Array(e.length);r[0]=-1;let o=0;for(let t=0;t<e.length;t++){const i=c(1,o+1,(t=>e[r[t]].claim_order),e[t].claim_order)-1;n[t]=r[i]+1;const a=i+1;r[a]=t,o=Math.max(a,o)}const i=[],a=[];let u=e.length-1;for(let t=r[o]+1;0!=t;t=n[t-1]){for(i.push(e[t-1]);u>=t;u--)a.push(e[u]);u--}for(;u>=0;u--)a.push(e[u]);i.reverse(),a.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,r=0;e<a.length;e++){for(;r<i.length&&a[e].claim_order>=i[r].claim_order;)r++;const n=r<i.length?i[r]:null;t.insertBefore(a[e],n)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function f(t,e,r){s&&!r?l(t,e):(e.parentNode!==t||r&&e.nextSibling!==r)&&t.insertBefore(e,r||null)}function h(t){t.parentNode.removeChild(t)}function d(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function v(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function b(){return p(" ")}function g(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function y(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,r){t.classList[r?"add":"remove"](e)}function j(t){u=t}const x=[],$=[],w=[],A=[],O=Promise.resolve();let C=!1;function k(t){w.push(t)}let E=!1;const S=new Set;function P(){if(!E){E=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];j(e),z(e.$$)}for(j(null),x.length=0;$.length;)$.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];S.has(e)||(S.add(e),e())}w.length=0}while(x.length);for(;A.length;)A.pop()();C=!1,E=!1,S.clear()}}function z(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const B=new Set;let M;function N(){M={r:0,c:[],p:M}}function T(){M.r||n(M.c),M=M.p}function D(t,e){t&&t.i&&(B.delete(t),t.i(e))}function I(t,e,r,n){if(t&&t.o){if(B.has(t))return;B.add(t),M.c.push((()=>{B.delete(t),n&&(r&&t.d(1),n())})),t.o(e)}}function F(t,r,i,a){const{fragment:u,on_mount:s,on_destroy:c,after_update:l}=t.$$;u&&u.m(r,i),a||k((()=>{const r=s.map(e).filter(o);c?c.push(...r):n(r),t.$$.on_mount=[]})),l.forEach(k)}function W(t,e){const r=t.$$;null!==r.fragment&&(n(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(x.push(t),C||(C=!0,O.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(e,o,i,a,c,l,f=[-1]){const d=u;j(e);const v=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:r(),dirty:f,skip_bound:!1};let p=!1;if(v.ctx=i?i(e,o.props||{},((t,r,...n)=>{const o=n.length?n[0]:r;return v.ctx&&c(v.ctx[t],v.ctx[t]=o)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](o),p&&R(e,t)),r})):[],v.update(),p=!0,n(v.before_update),v.fragment=!!a&&a(v.ctx),o.target){if(o.hydrate){s=!0;const t=function(t){return Array.from(t.childNodes)}(o.target);v.fragment&&v.fragment.l(t),t.forEach(h)}else v.fragment&&v.fragment.c();o.intro&&D(e.$$.fragment),F(e,o.target,o.anchor,o.customElement),s=!1,P()}j(d)}class G{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const U=(t,e)=>({x:t,y:e}),V=t=>t<0?-t:t,q=[U(1,0),U(0,1),U(-1,0),U(0,-1)],H={isPositive:t=>t.x>=0&&t.y>=0,isZero:t=>0===t.x&&0===t.y,area:t=>t.x*t.y,getPointsAround:t=>{const e=[-1,0,1],r=new Array(9);return e.forEach((n=>{e.forEach((e=>{const o=U(n,e);H.isZero(o)||r.push(H.add(t,o))}))})),r},getAdjacentPoints:t=>q.map((e=>H.add(t,e))),add:(t,e)=>U(t.x+e.x,t.y+e.y),subtract:(t,e)=>U(t.x-e.x,t.y-e.y),abs:t=>U(V(t.x),V(t.y)),isAround:(t,e)=>{const r=H.abs(H.subtract(t,e));return H.isInBounds(r,U(1,1))},isInBounds:(t,e)=>H.isPositive(t)&&t.x<e.x&&t.y<e.y};var Z=Math.ceil,J=Math.max;var K=function(t,e,r,n){for(var o=-1,i=J(Z((e-t)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=t,t+=r;return a};var Q=function(t,e){return t===e||t!=t&&e!=e},X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Y(t){var e={exports:{}};return t(e,e.exports),e.exports}var tt="object"==typeof X&&X&&X.Object===Object&&X,et="object"==typeof self&&self&&self.Object===Object&&self,rt=tt||et||Function("return this")(),nt=rt.Symbol,ot=Object.prototype,it=ot.hasOwnProperty,at=ot.toString,ut=nt?nt.toStringTag:void 0;var st=function(t){var e=it.call(t,ut),r=t[ut];try{t[ut]=void 0;var n=!0}catch(t){}var o=at.call(t);return n&&(e?t[ut]=r:delete t[ut]),o},ct=Object.prototype.toString;var lt=function(t){return ct.call(t)},ft=nt?nt.toStringTag:void 0;var ht=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ft&&ft in Object(t)?st(t):lt(t)};var dt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var vt=function(t){if(!dt(t))return!1;var e=ht(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var pt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var bt=function(t){return null!=t&&pt(t.length)&&!vt(t)},gt=/^(?:0|[1-9]\d*)$/;var yt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&gt.test(t))&&t>-1&&t%1==0&&t<e};var _t=function(t,e,r){if(!dt(r))return!1;var n=typeof e;return!!("number"==n?bt(r)&&yt(e,r.length):"string"==n&&e in r)&&Q(r[e],t)},mt=/\s/;var jt=function(t){for(var e=t.length;e--&&mt.test(t.charAt(e)););return e},xt=/^\s+/;var $t=function(t){return t?t.slice(0,jt(t)+1).replace(xt,""):t};var wt=function(t){return null!=t&&"object"==typeof t};var At=function(t){return"symbol"==typeof t||wt(t)&&"[object Symbol]"==ht(t)},Ot=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,kt=/^0o[0-7]+$/i,Et=parseInt;var St=function(t){if("number"==typeof t)return t;if(At(t))return NaN;if(dt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=dt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$t(t);var r=Ct.test(t);return r||kt.test(t)?Et(t.slice(2),r?2:8):Ot.test(t)?NaN:+t},Pt=1/0;var zt=function(t){return t?(t=St(t))===Pt||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Bt=function(t){return function(e,r,n){return n&&"number"!=typeof n&&_t(e,r,n)&&(r=n=void 0),e=zt(e),void 0===r?(r=e,e=0):r=zt(r),n=void 0===n?e<r?1:-1:zt(n),K(e,r,n,t)}}(),Mt=Math.floor,Nt=Math.random;var Tt=function(t,e){return t+Mt(Nt()*(e-t+1))},Dt=parseFloat,It=Math.min,Ft=Math.random;var Wt=function(t,e,r){if(r&&"boolean"!=typeof r&&_t(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=zt(t),void 0===e?(e=t,t=0):e=zt(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=Ft();return It(t+o*(e-t+Dt("1e-"+((o+"").length-1))),e)}return Tt(t,e)};var Rt=function(){this.__data__=[],this.size=0};var Lt=function(t,e){for(var r=t.length;r--;)if(Q(t[r][0],e))return r;return-1},Gt=Array.prototype.splice;var Ut=function(t){var e=this.__data__,r=Lt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Gt.call(e,r,1),--this.size,!0)};var Vt=function(t){var e=this.__data__,r=Lt(e,t);return r<0?void 0:e[r][1]};var qt=function(t){return Lt(this.__data__,t)>-1};var Ht=function(t,e){var r=this.__data__,n=Lt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Zt.prototype.clear=Rt,Zt.prototype.delete=Ut,Zt.prototype.get=Vt,Zt.prototype.has=qt,Zt.prototype.set=Ht;var Jt=Zt;var Kt=function(){this.__data__=new Jt,this.size=0};var Qt=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Xt=function(t){return this.__data__.get(t)};var Yt,te=function(t){return this.__data__.has(t)},ee=rt["__core-js_shared__"],re=(Yt=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+Yt:"";var ne=function(t){return!!re&&re in t},oe=Function.prototype.toString;var ie=function(t){if(null!=t){try{return oe.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ae=/^\[object .+?Constructor\]$/,ue=Function.prototype,se=Object.prototype,ce=ue.toString,le=se.hasOwnProperty,fe=RegExp("^"+ce.call(le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var he=function(t){return!(!dt(t)||ne(t))&&(vt(t)?fe:ae).test(ie(t))};var de=function(t,e){return null==t?void 0:t[e]};var ve=function(t,e){var r=de(t,e);return he(r)?r:void 0},pe=ve(rt,"Map"),be=ve(Object,"create");var ge=function(){this.__data__=be?be(null):{},this.size=0};var ye=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_e=Object.prototype.hasOwnProperty;var me=function(t){var e=this.__data__;if(be){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return _e.call(e,t)?e[t]:void 0},je=Object.prototype.hasOwnProperty;var xe=function(t){var e=this.__data__;return be?void 0!==e[t]:je.call(e,t)};var $e=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=be&&void 0===e?"__lodash_hash_undefined__":e,this};function we(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}we.prototype.clear=ge,we.prototype.delete=ye,we.prototype.get=me,we.prototype.has=xe,we.prototype.set=$e;var Ae=we;var Oe=function(){this.size=0,this.__data__={hash:new Ae,map:new(pe||Jt),string:new Ae}};var Ce=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ke=function(t,e){var r=t.__data__;return Ce(e)?r["string"==typeof e?"string":"hash"]:r.map};var Ee=function(t){var e=ke(this,t).delete(t);return this.size-=e?1:0,e};var Se=function(t){return ke(this,t).get(t)};var Pe=function(t){return ke(this,t).has(t)};var ze=function(t,e){var r=ke(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Be(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Be.prototype.clear=Oe,Be.prototype.delete=Ee,Be.prototype.get=Se,Be.prototype.has=Pe,Be.prototype.set=ze;var Me=Be;var Ne=function(t,e){var r=this.__data__;if(r instanceof Jt){var n=r.__data__;if(!pe||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Me(n)}return r.set(t,e),this.size=r.size,this};function Te(t){var e=this.__data__=new Jt(t);this.size=e.size}Te.prototype.clear=Kt,Te.prototype.delete=Qt,Te.prototype.get=Xt,Te.prototype.has=te,Te.prototype.set=Ne;var De=Te;var Ie=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Fe=function(t){return this.__data__.has(t)};function We(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Me;++e<r;)this.add(t[e])}We.prototype.add=We.prototype.push=Ie,We.prototype.has=Fe;var Re=We;var Le=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var Ge=function(t,e){return t.has(e)};var Ue=function(t,e,r,n,o,i){var a=1&r,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,d=2&r?new Re:void 0;for(i.set(t,e),i.set(e,t);++f<u;){var v=t[f],p=e[f];if(n)var b=a?n(p,v,f,e,t,i):n(v,p,f,t,e,i);if(void 0!==b){if(b)continue;h=!1;break}if(d){if(!Le(e,(function(t,e){if(!Ge(d,e)&&(v===t||o(v,t,r,n,i)))return d.push(e)}))){h=!1;break}}else if(v!==p&&!o(v,p,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h},Ve=rt.Uint8Array;var qe=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var He=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},Ze=nt?nt.prototype:void 0,Je=Ze?Ze.valueOf:void 0;var Ke=function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Ve(t),new Ve(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Q(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=qe;case"[object Set]":var s=1&n;if(u||(u=He),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;n|=2,a.set(t,e);var l=Ue(u(t),u(e),n,o,i,a);return a.delete(t),l;case"[object Symbol]":if(Je)return Je.call(t)==Je.call(e)}return!1};var Qe=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Xe=Array.isArray;var Ye=function(t,e,r){var n=e(t);return Xe(t)?n:Qe(n,r(t))};var tr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var er=function(){return[]},rr=Object.prototype.propertyIsEnumerable,nr=Object.getOwnPropertySymbols,or=nr?function(t){return null==t?[]:(t=Object(t),tr(nr(t),(function(e){return rr.call(t,e)})))}:er;var ir=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var ar=function(t){return wt(t)&&"[object Arguments]"==ht(t)},ur=Object.prototype,sr=ur.hasOwnProperty,cr=ur.propertyIsEnumerable,lr=ar(function(){return arguments}())?ar:function(t){return wt(t)&&sr.call(t,"callee")&&!cr.call(t,"callee")};var fr=function(){return!1},hr=Y((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?rt.Buffer:void 0,i=(o?o.isBuffer:void 0)||fr;t.exports=i})),dr={};dr["[object Float32Array]"]=dr["[object Float64Array]"]=dr["[object Int8Array]"]=dr["[object Int16Array]"]=dr["[object Int32Array]"]=dr["[object Uint8Array]"]=dr["[object Uint8ClampedArray]"]=dr["[object Uint16Array]"]=dr["[object Uint32Array]"]=!0,dr["[object Arguments]"]=dr["[object Array]"]=dr["[object ArrayBuffer]"]=dr["[object Boolean]"]=dr["[object DataView]"]=dr["[object Date]"]=dr["[object Error]"]=dr["[object Function]"]=dr["[object Map]"]=dr["[object Number]"]=dr["[object Object]"]=dr["[object RegExp]"]=dr["[object Set]"]=dr["[object String]"]=dr["[object WeakMap]"]=!1;var vr=function(t){return wt(t)&&pt(t.length)&&!!dr[ht(t)]};var pr=function(t){return function(e){return t(e)}},br=Y((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&tt.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),gr=br&&br.isTypedArray,yr=gr?pr(gr):vr,_r=Object.prototype.hasOwnProperty;var mr=function(t,e){var r=Xe(t),n=!r&&lr(t),o=!r&&!n&&hr(t),i=!r&&!n&&!o&&yr(t),a=r||n||o||i,u=a?ir(t.length,String):[],s=u.length;for(var c in t)!e&&!_r.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yt(c,s))||u.push(c);return u},jr=Object.prototype;var xr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jr)};var $r=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),wr=Object.prototype.hasOwnProperty;var Ar=function(t){if(!xr(t))return $r(t);var e=[];for(var r in Object(t))wr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Or=function(t){return bt(t)?mr(t):Ar(t)};var Cr=function(t){return Ye(t,Or,or)},kr=Object.prototype.hasOwnProperty;var Er=function(t,e,r,n,o,i){var a=1&r,u=Cr(t),s=u.length;if(s!=Cr(e).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in e:kr.call(e,l)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var d=!0;i.set(t,e),i.set(e,t);for(var v=a;++c<s;){var p=t[l=u[c]],b=e[l];if(n)var g=a?n(b,p,l,e,t,i):n(p,b,l,t,e,i);if(!(void 0===g?p===b||o(p,b,r,n,i):g)){d=!1;break}v||(v="constructor"==l)}if(d&&!v){var y=t.constructor,_=e.constructor;y==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(d=!1)}return i.delete(t),i.delete(e),d},Sr=ve(rt,"DataView"),Pr=ve(rt,"Promise"),zr=ve(rt,"Set"),Br=ve(rt,"WeakMap"),Mr="[object Map]",Nr="[object Promise]",Tr="[object Set]",Dr="[object WeakMap]",Ir="[object DataView]",Fr=ie(Sr),Wr=ie(pe),Rr=ie(Pr),Lr=ie(zr),Gr=ie(Br),Ur=ht;(Sr&&Ur(new Sr(new ArrayBuffer(1)))!=Ir||pe&&Ur(new pe)!=Mr||Pr&&Ur(Pr.resolve())!=Nr||zr&&Ur(new zr)!=Tr||Br&&Ur(new Br)!=Dr)&&(Ur=function(t){var e=ht(t),r="[object Object]"==e?t.constructor:void 0,n=r?ie(r):"";if(n)switch(n){case Fr:return Ir;case Wr:return Mr;case Rr:return Nr;case Lr:return Tr;case Gr:return Dr}return e});var Vr=Ur,qr="[object Arguments]",Hr="[object Array]",Zr="[object Object]",Jr=Object.prototype.hasOwnProperty;var Kr=function(t,e,r,n,o,i){var a=Xe(t),u=Xe(e),s=a?Hr:Vr(t),c=u?Hr:Vr(e),l=(s=s==qr?Zr:s)==Zr,f=(c=c==qr?Zr:c)==Zr,h=s==c;if(h&&hr(t)){if(!hr(e))return!1;a=!0,l=!1}if(h&&!l)return i||(i=new De),a||yr(t)?Ue(t,e,r,n,o,i):Ke(t,e,s,r,n,o,i);if(!(1&r)){var d=l&&Jr.call(t,"__wrapped__"),v=f&&Jr.call(e,"__wrapped__");if(d||v){var p=d?t.value():t,b=v?e.value():e;return i||(i=new De),o(p,b,r,n,i)}}return!!h&&(i||(i=new De),Er(t,e,r,n,o,i))};var Qr=function t(e,r,n,o,i){return e===r||(null==e||null==r||!wt(e)&&!wt(r)?e!=e&&r!=r:Kr(e,r,n,o,t,i))};var Xr=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var s=(u=r[o])[0],c=t[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var f=new De;if(n)var h=n(c,l,s,t,e,f);if(!(void 0===h?Qr(l,c,3,n,f):h))return!1}}return!0};var Yr=function(t){return t==t&&!dt(t)};var tn=function(t){for(var e=Or(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Yr(o)]}return e};var en=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var rn=function(t){var e=tn(t);return 1==e.length&&e[0][2]?en(e[0][0],e[0][1]):function(r){return r===t||Xr(r,t,e)}},nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,on=/^\w*$/;var an=function(t,e){if(Xe(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!At(t))||(on.test(t)||!nn.test(t)||null!=e&&t in Object(e))};function un(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(un.Cache||Me),r}un.Cache=Me;var sn=un;var cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ln=/\\(\\)?/g,fn=function(t){var e=sn(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(cn,(function(t,r,n,o){e.push(n?o.replace(ln,"$1"):r||t)})),e}));var hn=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},dn=nt?nt.prototype:void 0,vn=dn?dn.toString:void 0;var pn=function t(e){if("string"==typeof e)return e;if(Xe(e))return hn(e,t)+"";if(At(e))return vn?vn.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r};var bn=function(t){return null==t?"":pn(t)};var gn=function(t,e){return Xe(t)?t:an(t,e)?[t]:fn(bn(t))};var yn=function(t){if("string"==typeof t||At(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var _n=function(t,e){for(var r=0,n=(e=gn(e,t)).length;null!=t&&r<n;)t=t[yn(e[r++])];return r&&r==n?t:void 0};var mn=function(t,e,r){var n=null==t?void 0:_n(t,e);return void 0===n?r:n};var jn=function(t,e){return null!=t&&e in Object(t)};var xn=function(t,e,r){for(var n=-1,o=(e=gn(e,t)).length,i=!1;++n<o;){var a=yn(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&pt(o)&&yt(a,o)&&(Xe(t)||lr(t))};var $n=function(t,e){return null!=t&&xn(t,e,jn)};var wn=function(t,e){return an(t)&&Yr(e)?en(yn(t),e):function(r){var n=mn(r,t);return void 0===n&&n===e?$n(r,t):Qr(e,n,3)}};var An=function(t){return t};var On=function(t){return function(e){return null==e?void 0:e[t]}};var Cn=function(t){return function(e){return _n(e,t)}};var kn=function(t){return an(t)?On(yn(t)):Cn(t)};var En=function(t){return"function"==typeof t?t:null==t?An:"object"==typeof t?Xe(t)?wn(t[0],t[1]):rn(t):kn(t)};var Sn=function(t,e){for(var r,n=-1,o=t.length;++n<o;){var i=e(t[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r};const Pn={range:Bt,random:Wt,sumBy:function(t,e){return t&&t.length?Sn(t,En(e)):0}},zn=t=>!t.bomb&&!t.flagged,Bn=t=>t.flagged?"🚩️":t.explored?t.bomb?"💣":t.bombsAround>0?t.bombsAround+"":"":"";var Mn;!function(t){t[t.Created=0]="Created",t[t.Started=1]="Started",t[t.GameOver=2]="GameOver",t[t.Win=3]="Win"}(Mn||(Mn={}));class Nn{constructor(t,e){if(this.initGame=t=>{t.forceSafe=!0,this.getCellsAround(t).forEach((t=>t.forceSafe=!0)),this.initBombs(),this.populateNumbers()},this.checkWin=()=>{if(this.status!==Mn.Started)return;this.flagged+this.explored===this.nCells&&(this.status=Mn.Win)},this.intToPoint=t=>{const e=t%this.nCells;return{y:Math.floor(e/this.dimensions.x),x:e%this.dimensions.x}},this.inBounds=t=>H.isInBounds(t,this.dimensions),this.populateNumbers=()=>{const t=t=>this.getCell(t).bomb,e=e=>this.inBounds(e)&&t(e);this.matrix.forEach((t=>{t.forEach((t=>{t.bomb||(t.bombsAround=H.getPointsAround(t.p).filter(e).length)}))}))},this.autoDiscoverFrom=t=>{this.getCellsAround(t).forEach((t=>{!t.explored&&zn(t)&&(t.explored=!0,this.explored+=1,0===t.bombsAround&&this.autoDiscoverFrom(t))}))},this.getCell=t=>this.matrix[t.y][t.x],this.toggleFlag=t=>{if(this.status===Mn.Started&&!t.explored){if(!t.flagged&&this.flagged===this.bombs)return;t.flagged=!t.flagged,this.flagged+=t.flagged?1:-1,this.checkWin()}},this.getCellsAround=t=>H.getPointsAround(t.p).filter(this.inBounds).map((t=>this.getCell(t))),this.exploreAround=t=>{if(t.explored&&t.bombsAround){const e=this.getCellsAround(t);Pn.sumBy(e,(t=>t.flagged?1:0))===t.bombsAround&&e.forEach((t=>{t.explored||t.flagged||this.discover(t)}))}},this.highlightCellsAround=t=>{this.getCellsAround(t).forEach((t=>{t.explored||t.flagged||(t.highlight=!0)}))},this.removeHighlight=t=>{this.getCellsAround(t).forEach((t=>{t.highlight=!1}))},!H.isPositive(t))throw new Error("Dimensions must be positive");if(e<0)throw new Error("Number of bombs must be positive");if(e>=H.area(t)/3)throw new Error("Too many bombs");this.dimensions=t,this.nCells=H.area(this.dimensions),this.bombs=e,this.flagged=0,this.explored=0,this.status=Mn.Created,this.buildMatrix()}buildMatrix(){this.matrix=Pn.range(this.dimensions.y).map((t=>Pn.range(this.dimensions.x).map((e=>({bomb:!1,explode:!1,bombsAround:0,explored:!1,flagged:!1,highlight:!1,forceSafe:!1,p:U(e,t)})))))}initBombs(){let t=this.bombs,e=0;for(;0!==t;){e+=Pn.random(97);const r=this.intToPoint(e),n=this.matrix[r.y][r.x];n.bomb||n.forceSafe||(n.bomb=!0,t-=1)}}discover(t){this.status===Mn.GameOver||t.explored||(this.status===Mn.Created&&(this.initGame(t),this.status=Mn.Started),t.explored=!0,this.explored+=1,t.bomb?(t.explode=!0,this.status=Mn.GameOver):zn(t)&&0===t.bombsAround&&this.autoDiscoverFrom(t),this.checkWin())}}function Tn(e){let r,o,i,u,s,c,d;return{c(){r=v("td"),o=p(e[1]),i=b(),u=v("div"),y(u,"class","bubble svelte-tr6got"),m(u,"hidden",e[0].explored),y(r,"class",s=a(`container number-${e[1]}`)+" svelte-tr6got"),m(r,"explosion",e[0].explode),m(r,"highlight",e[0].highlight)},m(t,n){f(t,r,n),l(r,o),l(r,i),l(r,u),c||(d=[g(r,"click",e[2]),g(r,"dblclick",e[3]),g(r,"mousedown",e[4])],c=!0)},p(t,[e]){2&e&&_(o,t[1]),1&e&&m(u,"hidden",t[0].explored),2&e&&s!==(s=a(`container number-${t[1]}`)+" svelte-tr6got")&&y(r,"class",s),3&e&&m(r,"explosion",t[0].explode),3&e&&m(r,"highlight",t[0].highlight)},i:t,o:t,d(t){t&&h(r),c=!1,n(d)}}}function Dn(t,e,r){let n,{data:o}=e,{onClick:i}=e,{onRightClick:a}=e,{onDoubleClick:u}=e;return t.$$set=t=>{"data"in t&&r(0,o=t.data),"onClick"in t&&r(5,i=t.onClick),"onRightClick"in t&&r(6,a=t.onRightClick),"onDoubleClick"in t&&r(7,u=t.onDoubleClick)},t.$$.update=()=>{1&t.$$.dirty&&r(1,n=Bn(o))},[o,n,t=>{2!==t.buttons&&i(o)},()=>{u(o)},t=>{2===t.button&&a(o),3===t.buttons&&u(o)},i,a,u]}class In extends G{constructor(t){super(),L(this,t,Dn,Tn,i,{data:0,onClick:5,onRightClick:6,onDoubleClick:7})}}var Fn="1.0.0";function Wn(t,e,r){const n=t.slice();return n[12]=e[r],n}function Rn(t,e,r){const n=t.slice();return n[15]=e[r],n}function Ln(t){let e,r;return e=new In({props:{data:t[15],onClick:t[6],onRightClick:t[7],onDoubleClick:t[8]}}),{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,n){F(e,t,n),r=!0},p(t,r){const n={};1&r&&(n.data=t[15]),e.$set(n)},i(t){r||(D(e.$$.fragment,t),r=!0)},o(t){I(e.$$.fragment,t),r=!1},d(t){W(e,t)}}}function Gn(t){let e,r,n,o=t[12],i=[];for(let e=0;e<o.length;e+=1)i[e]=Ln(Rn(t,o,e));const a=t=>I(i[t],1,1,(()=>{i[t]=null}));return{c(){e=v("tr");for(let t=0;t<i.length;t+=1)i[t].c();r=b()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);l(e,r),n=!0},p(t,n){if(449&n){let u;for(o=t[12],u=0;u<o.length;u+=1){const a=Rn(t,o,u);i[u]?(i[u].p(a,n),D(i[u],1)):(i[u]=Ln(a),i[u].c(),D(i[u],1),i[u].m(e,r))}for(N(),u=o.length;u<i.length;u+=1)a(u);T()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)D(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)I(i[t]);n=!1},d(t){t&&h(e),d(i,t)}}}function Un(t){let e,r,o,i,a,u,s,c,j,x,$,w,A,O,C,k,E,S,P,z,B,M=t[0].matrix,F=[];for(let e=0;e<M.length;e+=1)F[e]=Gn(Wn(t,M,e));const W=t=>I(F[t],1,1,(()=>{F[t]=null}));return{c(){e=v("main"),r=v("div"),o=v("h1"),o.textContent="MINESWEEPER!",i=b(),a=v("div"),u=v("span"),s=p(t[1]),c=b(),j=v("span"),x=p(t[4]),$=b(),w=v("div"),A=v("table"),O=v("tbody");for(let t=0;t<F.length;t+=1)F[t].c();C=b(),k=v("div"),k.innerHTML='<span class="svelte-1nd3ter">WIN</span>',E=b(),S=v("span"),S.textContent=`${t[5]}`,y(o,"class","svelte-1nd3ter"),y(u,"class","face svelte-1nd3ter"),y(a,"class","svelte-1nd3ter"),m(a,"hidden",t[2]),y(r,"class","row svelte-1nd3ter"),y(A,"class","table svelte-1nd3ter"),y(k,"class","win svelte-1nd3ter"),m(k,"hidden",!t[3]),y(w,"class","app svelte-1nd3ter"),y(S,"class","version svelte-1nd3ter"),y(e,"class","svelte-1nd3ter")},m(n,h){f(n,e,h),l(e,r),l(r,o),l(r,i),l(r,a),l(a,u),l(u,s),l(a,c),l(a,j),l(j,x),l(e,$),l(e,w),l(w,A),l(A,O);for(let t=0;t<F.length;t+=1)F[t].m(O,null);l(w,C),l(w,k),l(e,E),l(e,S),P=!0,z||(B=[g(A,"mouseup",t[9]),g(e,"contextmenu",t[10])],z=!0)},p(t,[e]){if((!P||2&e)&&_(s,t[1]),(!P||16&e)&&_(x,t[4]),4&e&&m(a,"hidden",t[2]),449&e){let r;for(M=t[0].matrix,r=0;r<M.length;r+=1){const n=Wn(t,M,r);F[r]?(F[r].p(n,e),D(F[r],1)):(F[r]=Gn(n),F[r].c(),D(F[r],1),F[r].m(O,null))}for(N(),r=M.length;r<F.length;r+=1)W(r);T()}8&e&&m(k,"hidden",!t[3])},i(t){if(!P){for(let t=0;t<M.length;t+=1)D(F[t]);P=!0}},o(t){F=F.filter(Boolean);for(let t=0;t<F.length;t+=1)I(F[t]);P=!1},d(t){t&&h(e),d(F,t),z=!1,n(B)}}}function Vn(t,e,r){let n,o,i,a,u,s=new Nn(U(30,16),99),c=`v${Fn}`;return t.$$.update=()=>{1&t.$$.dirty&&r(1,n=s.status===Mn.GameOver?"😭":"😃"),1&t.$$.dirty&&r(2,o=s.status===Mn.Created),1&t.$$.dirty&&r(3,i=s.status===Mn.Win),1&t.$$.dirty&&r(4,a=`${s.flagged}/${s.bombs}`)},[s,n,o,i,a,c,t=>{s.discover(t),r(0,s)},t=>{t.explored&&t.bombsAround?(u=t,s.highlightCellsAround(t)):s.toggleFlag(t),r(0,s)},t=>{s.exploreAround(t),r(0,s)},t=>{2===t.button&&u&&(s.removeHighlight(u),r(0,s))},t=>{t.preventDefault()}]}return new class extends G{constructor(t){super(),L(this,t,Vn,Un,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
